# 카카오 알림톡 템플릿 등록 가이드

## 📋 등록해야 할 템플릿 목록

총 6개의 알림톡 템플릿을 카카오 비즈니스에 등록해야 합니다.

---

## 1️⃣ 회원가입 환영 알림톡

**템플릿 코드**: `WELCOME`
**템플릿 타입**: 회원 가입
**템플릿 카테고리**: 가입 완료

### 템플릿 내용
```
[올띵버킷]
#{name}님, 가입을 환영합니다! 🎉

다양한 체험단에 참여하고 리뷰 작성으로 포인트를 받아보세요!

👉 체험단 둘러보기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{url}` - 체험단 목록 페이지 URL

---

## 2️⃣ 캠페인 신청 완료 알림톡

**템플릿 코드**: `APPLICATION_SUBMITTED`
**템플릿 타입**: 예약 알림
**템플릿 카테고리**: 예약 완료

### 템플릿 내용
```
[올띵버킷]
#{name}님, 신청이 완료되었습니다! ✅

📋 신청 정보
- 캠페인: #{campaignName}
- 브랜드: #{brandName}
- 신청일: #{applicationDate}
- 상태: 승인 대기중

영업일 기준 3일 이내에 결과를 안내드립니다.

👉 내 신청 확인하기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{campaignName}` - 캠페인 이름
- `#{brandName}` - 브랜드명
- `#{applicationDate}` - 신청일
- `#{url}` - 내 신청 페이지 URL

---

## 3️⃣ 신청 승인 알림톡

**템플릿 코드**: `APPLICATION_APPROVED`
**템플릿 타입**: 참여 결과 알림
**템플릿 카테고리**: 당첨/선정

### 템플릿 내용
```
[올띵버킷]
#{name}님, 축하드립니다! 🎉

#{campaignName} 체험단에 선정되셨습니다!

📦 다음 단계
1. 제품 배송 대기
2. 체험 진행 및 리뷰 작성
3. 리뷰 승인 후 포인트 지급 (#{rewardPoints}P)

👉 자세히 보기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{campaignName}` - 캠페인 이름
- `#{rewardPoints}` - 지급 예정 포인트
- `#{url}` - 내 신청 페이지 URL

---

## 4️⃣ 신청 반려 알림톡

**템플릿 코드**: `APPLICATION_REJECTED`
**템플릿 타입**: 참여 결과 알림
**템플릿 카테고리**: 미당첨/미선정

### 템플릿 내용
```
[올띵버킷]
#{name}님, 신청 결과를 안내드립니다.

#{campaignName} 체험단 신청이 아쉽게도 선정되지 않았습니다.

📝 반려 사유
#{reason}

다른 체험단도 둘러보세요!

👉 체험단 보기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{campaignName}` - 캠페인 이름
- `#{reason}` - 반려 사유
- `#{url}` - 체험단 목록 페이지 URL

---

## 5️⃣ 리뷰 승인 + 포인트 지급 완료 알림톡

**템플릿 코드**: `REVIEW_APPROVED_POINTS_PAID`
**템플릿 타입**: 포인트 알림
**템플릿 카테고리**: 적립 완료

### 템플릿 내용
```
[올띵버킷]
#{name}님, 리뷰가 승인되었습니다! ✨

#{campaignName} 리뷰 검수가 완료되어 포인트가 지급되었습니다.

💰 포인트 지급 내역
- 지급 포인트: #{amount}P
- 현재 잔액: #{totalPoints}P
- 지급일: #{paymentDate}

👉 포인트 확인하기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{campaignName}` - 캠페인 이름
- `#{amount}` - 지급된 포인트
- `#{totalPoints}` - 총 포인트 잔액
- `#{paymentDate}` - 지급일
- `#{url}` - 포인트 페이지 URL

---

## 6️⃣ 리뷰 반려 알림톡

**템플릿 코드**: `REVIEW_REJECTED`
**템플릿 타입**: 참여 결과 알림
**템플릿 카테고리**: 기타

### 템플릿 내용
```
[올띵버킷]
#{name}님, 리뷰 검토 결과를 안내드립니다.

#{campaignName} 리뷰가 반려되었습니다.

❌ 반려 사유
#{reason}

반려 사유를 확인하고 수정 후 다시 제출해주세요.

👉 리뷰 수정하기
#{url}
```

### 변수명
- `#{name}` - 사용자 이름
- `#{campaignName}` - 캠페인 이름
- `#{reason}` - 반려 사유
- `#{url}` - 내 신청 페이지 URL

---

## 📝 등록 방법

1. **카카오 비즈니스 관리자 센터 접속**
   - https://business.kakao.com

2. **알림톡 템플릿 등록**
   - 왼쪽 메뉴에서 "알림톡" 선택
   - "템플릿 관리" → "템플릿 등록" 클릭
   - 위 템플릿 내용을 각각 등록

3. **템플릿 승인 대기**
   - 카카오 검수팀의 승인 필요 (보통 1-2 영업일 소요)

4. **환경 변수 설정**
   - Vercel 환경 변수에 다음 값들이 설정되어 있는지 확인:
     - `VITE_SMS_ACCESS_KEY` - NCP Access Key
     - `VITE_SMS_SECRET_KEY` - NCP Secret Key
     - `VITE_NCP_ALIMTALK_SERVICE_ID` - 알림톡 서비스 ID
     - `VITE_SMS_FROM_NUMBER` - SMS 발신번호 (Failover용)

---

## 🔄 알림톡 발송 타이밍

### 자동 발송
1. **회원가입 시** - 환영 알림톡 (향후 구현 예정)
2. **캠페인 신청 완료 시** - 신청 완료 알림톡 ✅ 구현 완료

### 관리자 수동 발송
3. **신청 승인 시** - 승인 알림톡 (관리자 대시보드에서 발송)
4. **신청 반려 시** - 반려 알림톡 (관리자 대시보드에서 발송)
5. **리뷰 승인 + 포인트 지급 시** - 리뷰 승인 알림톡
6. **리뷰 반려 시** - 리뷰 반려 알림톡

---

## 🚨 주의사항

1. **플러스친구 ID 확인**
   - 현재 설정된 플러스친구 ID: `@올띵버킷`
   - 실제 등록한 플러스친구 ID와 일치하는지 확인 필요
   - 불일치 시 `/src/services/alimtalkService.ts` 8번째 줄 수정

2. **Failover SMS/LMS 설정**
   - 알림톡 발송 실패 시 자동으로 SMS/LMS로 대체 발송됨
   - SMS 발신번호가 미리 등록되어 있어야 함

3. **변수명 정확히 일치**
   - 템플릿 등록 시 변수명(#{name}, #{url} 등)이 정확히 일치해야 함
   - 오타 시 발송 실패

4. **템플릿 승인 필수**
   - 템플릿이 승인되지 않으면 발송 불가
   - 승인 전 테스트 시 Failover SMS로만 발송됨

---

## ✅ 구현 완료 내역

### 파일 수정 사항
1. ✅ `src/services/alimtalkService.ts` - 알림톡 서비스 구현
2. ✅ `src/components/ApplicationFormModal.tsx` - 신청 완료 시 자동 알림톡 발송
3. ✅ `src/pages/AdminDashboard.tsx` - 관리자 승인/반려 시 알림톡 발송 옵션
4. ✅ `src/components/ApprovalModal.tsx` - 알림톡 발송 UI 추가

### 다음 단계 (TODO)
- [ ] 카카오 비즈니스에 6개 템플릿 등록 및 승인 대기
- [ ] 회원가입 시 환영 알림톡 자동 발송 구현
- [ ] 리뷰 승인/반려 시 알림톡 발송 로직 추가
- [ ] 포인트 지급 시 알림톡 발송 통합
